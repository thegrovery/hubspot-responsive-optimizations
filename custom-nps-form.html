<div class="main-nps-section">
    <div class="elementWrapper">
        <div class="ratings">
            <p style="text-align: center;">Please select a number, 1-10, with 1 being the lowest satisfaction and 10 being the highest satisfaction.*</p>
            <div id="ratings-buttons" class="ratings-buttons"><!-- Buttons for ratings 1 through 10 --> <button id="nps-1" class="nps-button" onclick="setRating(1)">1</button> <button id="nps-2" class="nps-button" onclick="setRating(2)">2</button> <button id="nps-3" class="nps-button" onclick="setRating(3)">3</button> <button id="nps-4" class="nps-button" onclick="setRating(4)">4</button> <button id="nps-5" class="nps-button" onclick="setRating(5)">5</button> <button id="nps-6" class="nps-button" onclick="setRating(6)">6</button> <button id="nps-7" class="nps-button" onclick="setRating(7)">7</button> <button id="nps-8" class="nps-button" onclick="setRating(8)">8</button> <button id="nps-9" class="nps-button" onclick="setRating(9)">9</button> <button id="nps-10" class="nps-button" onclick="setRating(10)">10</button>
            <div class="likeWrap">
                <div class="likely not">Not likely at all</div>
                <div class="likely very">Extremely likely</div>
            </div>
        </div>
        </div>
    </div>
    <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function () {    
                function setRating(value) {
                    var dropdown = document.querySelector('[name="nps_score"]');
                    var buttonElements = document.querySelectorAll('.nps-button');
                    var onClickThis = event.currentTarget;
    
                    // Set the dropdown's value to the selected rating
                    if (dropdown) {
                        dropdown.value = value;
                    }
    
                    // Remove the 'active' class from any existing active element
                    buttonElements.forEach(element => element.classList.remove("active"));
    
                    // Set an 'active' class on the clicked element
                    onClickThis.classList.add("active");
    
                    // Optionally, for debugging purposes, you can log the selected value
                    console.log("Selected rating:", value);
                }
    
                // Make the setRating function available globally
                window.setRating = setRating;
    
                
                //Hide buttons section on form submit
                window.addEventListener("message", function(event) {
                if(event.data.eventName == "onFormSubmitted"){
                console.log("===== FORM SUBMIT HERE =====");
                let buttons = document.querySelector('#ratings-buttons');
                buttons.style.display="none";
                }
            });
        });
    </script>
</div>